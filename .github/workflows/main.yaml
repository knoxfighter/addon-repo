name: Build and Deploy
on:
  pull_request:
  push:
  #  schedule:
  #    - cron: '0 * * * *'
  workflow_dispatch:

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v4

      - name: Checkout out repo
        uses: actions/checkout@v4
        with:
          ref: "out"
          path: "out"

      - name: Create manifest
        uses: knoxfighter/generate-loading-screen@main
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          manifest_path: "out/manifest.json"

#      - name: Commit and Push manifest
#        run: |
#          cd out
#          git config user.name github-actions
#          git config user.email github-actions@github.com
#          git add .
#          git commit -m "action manifest update"
#          git push

      - name: Deploy
        uses: JamesIves/github-pages-deploy-action@4.1.5
        if: github.ref == 'refs/heads/master'
        with:
          branch: out # The branch the action should deploy to.
          folder: out # The folder the action should deploy.
